<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <title>Besiktningsprotokoll</title>

  <style>
    html, body {
      margin: 0;
      padding: 0;
    }
    .page {
      font-family: Arial, Helvetica, sans-serif;
      font-size: 12pt;
      margin: 20mm;
      box-sizing: border-box;
    }

    h1 {
      text-align: center;
      font-size: 22pt;
      font-weight: bold;
      margin: 0 0 18pt 0;
    }

    /* ---------- TABLES ON PAGE 1 ---------- */

    .two-col-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10mm;
      gap: 10mm;   /* spacing between tables */
    }

    .table-block {
      width: 55%;             /* user requested 55% width for left table */
    }

    .table-title {
      font-weight: bold;
      font-size: 14pt;
      margin-bottom: 4pt;
    }

    table.info-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12pt;
      margin-bottom: 6pt;
    }

    table.info-table td {
      border: 0.5pt solid #000;
      padding: 4pt 6pt;
    }

    .label {
      font-weight: bold;
    }

    /* ---------- FREE TEXT BLOCK ---------- */

    .section-title {
      font-size: 16pt;
      font-weight: bold;
      margin: 20pt 0 6pt 0;
    }

    .free-text {
      border: 0.5pt solid #000;
      padding: 8pt;
      min-height: 40mm;
      white-space: pre-wrap;
    }

    /* ---------- PAGE BREAK ---------- */
    .page-break {
      page-break-before: always;
    }

    /* ---------- OBSERVATIONER ---------- */
    .obs-section {
      font-size: 18pt;
      font-weight: bold;
      margin-top: 16pt;
      margin-bottom: 4pt;
    }

    .obs-divider {
      border-bottom: 1.5pt solid #000;
      margin-bottom: 8pt;
    }

    .subsection-title {
      font-weight: bold;
      font-size: 13pt;
      margin-top: 10pt;
      margin-bottom: 2pt;
    }

    .subsection-divider {
      border-bottom: 0.5pt solid #000;
      margin-top: 4pt;
      margin-bottom: 12pt;
    }

    .subsection-row {
      display: flex;
      justify-content: space-between;
      gap: 10mm;
      margin-bottom: 10pt;
    }

    .comment-block {
      width: 60%;
      white-space: pre-wrap;
    }

    .image-block {
      width: 40%;
      text-align: right;
    }

    .obs-image {
      max-width: 60mm;
      max-height: 45mm;
      object-fit: contain;
      border: 0.5pt solid #444;
    }
  </style>
</head>

<body>
  <div class="page">

    <h1>Besiktningsprotokoll</h1>

    <!-- PAGE 1 – PROJECT INFO (4 TABLES) -->

    <!-- First row of two tables -->
    <div class="two-col-row">
      <!-- PROJEKTINFO -->
      <div class="table-block">
        <div class="table-title">Projektinformation</div>
        <table class="info-table">
          {{#each projectInfo}}
            <tr>
              <td class="label">{{label}}</td>
              <td>{{value}}</td>
            </tr>
          {{/each}}
        </table>
      </div>

      <!-- FASTIGHETSUPPGIFTER -->
      <div class="table-block">
        <div class="table-title">Fastighetsuppgifter</div>
        <table class="info-table">
          {{#each fastighetsuppgifter}}
            <tr>
              <td class="label">{{label}}</td>
              <td>{{value}}</td>
            </tr>
          {{/each}}
        </table>
      </div>
    </div>

    <!-- Second row of two tables -->
    <div class="two-col-row">
      <!-- BESIKTNINGSUPPGIFTER -->
      <div class="table-block">
        <div class="table-title">Besiktningsuppgifter</div>
        <table class="info-table">
          {{#each besiktningsuppgifter}}
            <tr>
              <td class="label">{{label}}</td>
              <td>{{value}}</td>
            </tr>
          {{/each}}
        </table>
      </div>

      <!-- BYGGNADSBESKRIVNING -->
      <div class="table-block">
        <div class="table-title">Byggnadsbeskrivning</div>
        <table class="info-table">
          {{#each byggnadsbeskrivning}}
            <tr>
              <td class="label">{{label}}</td>
              <td>{{value}}</td>
            </tr>
          {{/each}}
        </table>
      </div>
    </div>

    <!-- BESIKTNINGSUTLÅTANDE (FREE TEXT) -->
    <div class="section-title">Besiktningsutlåtande</div>
    <div class="free-text">
      {{besiktningsutlatande}}
    </div>

    <!-- PAGE BREAK -->
    <div class="page-break"></div>

    <!-- PAGE 2+ OBSERVATIONER -->
    <div class="obs-title">Observationer</div>

    {{#each mainSections}}

      <div class="obs-section">{{name}}</div>
      <div class="obs-divider"></div>

      {{#each subsections}}
        <div class="subsection-title">{{title}}</div>

        <div class="subsection-row">
          <!-- COMMENT -->
          <div class="comment-block">{{comment}}</div>

          <!-- IMAGE -->
          <div class="image-block">
            {{#if imageUrl}}
              <img src="{{imageUrl}}" class="obs-image" crossorigin="anonymous" />
            {{/if}}
          </div>
        </div>

        <div class="subsection-divider"></div>

      {{/each}}

    {{/each}}

  </div>
</body>
</html>
