<!DOCTYPE html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <title>Inspektionsrapport</title>
    <style>
      /* Reset margins so html2pdf margins don't stack with ours */
      html, body {
        margin: 0;
        padding: 0;
      }

      /* Main page container – our own margins */
      .page {
        font-family: Arial, Helvetica, sans-serif;
        font-size: 12pt;
        margin: 20mm 24mm 20mm 12mm; /* top | right | bottom | left */
        box-sizing: border-box;
      }

      h1 {
        text-align: center;
        font-size: 20pt;
        font-weight: bold;
        margin: 0 0 18pt 0; /* more space before project info */
      }

      .project-info {
        margin-bottom: 18pt; /* slightly tighter than header spacing */
        line-height: 1.4;
      }

      .project-info-row {
        margin: 2pt 0;
      }

      .project-label {
        font-weight: bold;
      }

      .section-title {
        font-size: 14pt;
        font-weight: bold;
        margin: 14pt 0 10pt 0; /* more space above table */
      }

      .no-notes {
        margin-top: 4pt;
        font-style: italic;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        table-layout: fixed; /* keeps column widths stable */
        font-size: 11pt;
      }

      th, td {
        border: 0.5pt solid #000;
        padding: 4pt 6pt;
        vertical-align: top;
        box-sizing: border-box;
      }

      th {
        font-weight: bold;
        text-align: left;
      }

      /* Column widths: 20% / 50% / 30% */
      th.delomrade-col,
      td.delomrade-col {
        width: 20%;
      }

      th.kommentar-col,
      td.kommentar-col {
        width: 50%;
      }

      th.bild-col,
      td.bild-col {
        width: 30%;
      }

      td.bild-col {
        text-align: center;
      }

      .bild-thumb {
        max-width: 60mm;
        max-height: 45mm;
        object-fit: contain;
        display: block;
        margin: 0 auto;
      }

      .dash {
        color: #666;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="page">
      <!-- Title -->
      <h1>Inspektionsrapport</h1>

      <!-- Project information -->
      <div class="project-info">
        <div class="project-info-row">
          <span class="project-label">Projektets namn:</span>
          <span>{{project.name}}</span>
        </div>
        <div class="project-info-row">
          <span class="project-label">Adress:</span>
          <span>{{project.address}}</span>
        </div>
        <div class="project-info-row">
          <span class="project-label">Datum:</span>
          <span>{{project.date}}</span>
        </div>
        <div class="project-info-row">
          <span class="project-label">Inspektör:</span>
          <span>{{project.inspector}}</span>
        </div>
      </div>

      <!-- Section header -->
      <div class="section-title">Inspektionsanteckningar</div>

      {{#if hasNotes}}
        <table>
          <thead>
            <tr>
              <th class="delomrade-col">Delområde</th>
              <th class="kommentar-col">Kommentar</th>
              <th class="bild-col">Bild</th>
            </tr>
          </thead>
          <tbody>
            {{#each notes}}
              <tr>
                <!-- Delområde -->
                <td class="delomrade-col">
                  {{#if delomrade}}
                    {{delomrade}}
                  {{else}}
                    <span class="dash">–</span>
                  {{/if}}
                </td>

                <!-- Kommentar -->
                <td class="kommentar-col">
                  {{#if comment}}
                    {{comment}}
                  {{else}}
                    <span class="dash">–</span>
                  {{/if}}
                </td>

                <!-- Bild -->
                <td class="bild-col">
                  {{#if imageUrl}}
                    <img
                      src="{{imageUrl}}"
                      alt="Inspektionsbild"
                      class="bild-thumb"
                      crossorigin="anonymous"
                    />
                  {{else}}
                    <span class="dash">–</span>
                  {{/if}}
                </td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      {{else}}
        <div class="no-notes">
          Inga inspektionsanteckningar.
        </div>
      {{/if}}
    </div>
  </body>
</html>
